---
layout: post
title: How to Use BLS API
---

The US Bureau of Labor Statistics has a vast repository of labor market data for the United States, but much of the data requires clicking through various sites and using their database query tools. If only there were an easier way. But there is! They have public and private APIs (application programming interface) that allow programmers to retrieve any published data in JSON format. The first think you'll want to do is register a [public API data API account](https://data.bls.gov/registrationEngine/). Registering allows you to access version 2.0 of the API, providing access to additional data more frequently. There is additional functionality such as the ability to add calculations and annual averages to requests, along with series descriptions. 

Fortunately for newbies like me, BLS provides [sample code](https://www.bls.gov/developers/api_sample_code.htm) for making API requests in C#, Java, PHP, Python, R, Ruby/Ruby on Rails, SAS, Unix Command Line, Matlab and Julia. Since I'm interested in Python, I've selected the Python sample code as a template for my API request. 

`
import requests
import json
import prettytable
headers = {'Content-type': 'application/json'}
data = json.dumps({"seriesid": ['CUUR0000SA0','SUUR0000SA0'],"startyear":"2011", "endyear":"2014"})
p = requests.post('https://api.bls.gov/publicAPI/v2/timeseries/data/', data=data, headers=headers)
json_data = json.loads(p.text)
for series in json_data['Results']['series']:
    x=prettytable.PrettyTable(["series id","year","period","value","footnotes"])
    seriesId = series['seriesID']
    for item in series['data']:
        year = item['year']
        period = item['period']
        value = item['value']
        footnotes=""
        for footnote in item['footnotes']:
            if footnote:
                footnotes = footnotes + footnote['text'] + ','
       'if 'M01' <= period <= 'M12':'
            x.add_row([seriesId,year,period,value,footnotes[0:-1]])
    output = open(seriesId + '.txt','w')
    output.write (x.get_string())
    output.close()
`
